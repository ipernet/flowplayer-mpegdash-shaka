!function(){shaka.polyfill.CustomEvent.install(),shaka.polyfill.MediaKeys.install(),shaka.polyfill.VideoPlaybackQuality.install();var e=(window,flowplayer.support.video&&(shaka.player.Player.isBrowserSupported()||!!window.MediaSource)),n=function(e,a){var o,t,r=flowplayer.bean,i=flowplayer.common,l=!1,u=!1,s=function(n){t=i.createElement("video"),r.on(t,"play",function(){l?(t.pause(),l=!1):e.trigger("resume",[e])}),r.on(t,"pause",function(){e.trigger("pause",[e])}),r.on(t,"timeupdate",function(){e.trigger("progress",[e,t.currentTime])}),r.on(t,"loadeddata",function(){flowplayer.extend(n,{duration:t.duration,seekable:t.seekable.end(null),width:t.videoWidth,height:t.videoHeight,url:t.currentSrc}),u=!0,e.trigger("ready",[e,n])}),r.on(t,"seeked",function(){e.trigger("seek",[e,t.currentTime])}),r.on(t,"progress",function(a){try{var o,r=t.buffered,i=r.end(0),l=t.currentTime,u=0;if(l)for(o=1;o<r.length;o+=1)u=r.end(o),u>=l&&r.start(o)<=l&&(i=u);n.buffer=i}catch(s){}e.trigger("buffer",[e,a])}),r.on(t,"ended",function(){e.trigger("finish",[e])}),r.on(t,"volumechange",function(){e.trigger("volume",[e,t.volume])}),t.className="fp-engine mpegdash-engine",i.prepend(i.find(".fp-player",a)[0],t),e.on("beforeseek",function(){l=e.conf.autoplay&&e.paused})},d={engineName:n.engineName,pick:function(e){var n,a;for(n=0;n<e.length;n+=1)if(a=e[n],"application/dash+xml"===a.type)return a},load:function(n){i.removeNode(i.findDirect("video",a)[0]||i.find(".fp-player > video",a)[0]),s(n),o=new shaka.player.Player(t),o.addEventListener("error",function(e){console.error(e)}),n.shaka||(n.shaka={});var r=n.shaka.bandwidthEstimator?n.shaka.bandwidthEstimator:new shaka.util.EWMABandwidthEstimator,l=n.shaka.contentProtectionCallback?n.shaka.contentProtectionCallback:null,u=new shaka.player.DashVideoSource(n.src,l,r),d="function"==typeof n.shaka.onLoad?n.shaka.onLoad:null;d?o.load(u).then(function(){d.call(o)}):o.load(u),e.conf.autoplay&&t.play()},play:function(){t.play()},resume:function(){t.play()},pause:function(){t.pause()},seek:function(e){t.currentTime=e},volume:function(e){t&&(t.volume=e)},speed:function(n){t.playbackRate=n,e.trigger("speed",[e,n])},unload:function(){u&&(o.unload(),i.removeNode(t)),e.trigger("unload",[e])}};return d};n.engineName="mpegdash-shaka",n.canPlay=function(e){return"application/dash+xml"===e},e&&flowplayer.engines.push(n)}();