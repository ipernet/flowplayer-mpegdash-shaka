!function(){shaka.polyfill.CustomEvent.install(),shaka.polyfill.MediaKeys.install(),shaka.polyfill.VideoPlaybackQuality.install();var e=(window,flowplayer.support.video&&(shaka.player.Player.isBrowserSupported()||!!window.MediaSource)),n=function(e,a){var o,r,t=flowplayer.bean,i=flowplayer.common,l=!1,u=!1,s=function(n){r=i.createElement("video"),t.on(r,"play",function(){l?(r.pause(),l=!1):e.trigger("resume",[e])}),t.on(r,"pause",function(){e.trigger("pause",[e])}),t.on(r,"timeupdate",function(){e.trigger("progress",[e,r.currentTime])}),t.on(r,"loadeddata",function(){flowplayer.extend(n,{duration:r.duration,seekable:r.seekable.end(null),width:r.videoWidth,height:r.videoHeight,url:r.currentSrc}),u=!0,e.trigger("ready",[e,n])}),t.on(r,"seeked",function(){e.trigger("seek",[e,r.currentTime])}),t.on(r,"progress",function(a){try{var o,t=r.buffered,i=t.end(0),l=r.currentTime,u=0;if(l)for(o=1;o<t.length;o+=1)u=t.end(o),u>=l&&t.start(o)<=l&&(i=u);n.buffer=i}catch(s){}e.trigger("buffer",[e,a])}),t.on(r,"ended",function(){e.trigger("finish",[e])}),t.on(r,"volumechange",function(){e.trigger("volume",[e,r.volume])}),r.className="fp-engine mpegdash-engine",i.prepend(i.find(".fp-player",a)[0],r),e.on("beforeseek",function(){l=e.conf.autoplay&&e.paused})},d={engineName:n.engineName,pick:function(e){var n,a;for(n=0;n<e.length;n+=1)if(a=e[n],"application/dash+xml"===a.type)return a},load:function(n){i.removeNode(i.findDirect("video",a)[0]||i.find(".fp-player > video",a)[0]),s(n),o=new shaka.player.Player(r),o.addEventListener("error",function(e){console.error(e)}),n.shaka||(n.shaka={});var t=n.shaka.bandwidthEstimator?n.shaka.bandwidthEstimator:new shaka.util.EWMABandwidthEstimator,l=n.shaka.contentProtectionCallback?n.shaka.contentProtectionCallback:null,u=new shaka.player.DashVideoSource(n.src,l,t),d="function"==typeof n.shaka.onLoad?n.shaka.onLoad:null;d?o.load(u).then(function(){d.call(o)}):o.load(u),e.conf.autoplay&&(flowplayer.support.zeropreload?e.conf.splash&&r.play():r.load())},play:function(){r.play()},resume:function(){r.play()},pause:function(){r.pause()},seek:function(e){r.currentTime=e},volume:function(e){r&&(r.volume=e)},speed:function(n){r.playbackRate=n,e.trigger("speed",[e,n])},unload:function(){u&&(o.unload(),i.removeNode(r)),e.trigger("unload",[e])}};return d};n.engineName="mpegdash-shaka",n.canPlay=function(e){return"application/dash+xml"===e},e&&flowplayer.engines.push(n)}();